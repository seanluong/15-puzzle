!function(a,b){b["true"]=a;var c=function(a){a?(this.cells=a.cells,this.row=a.row,this.col=a.col,this.target=a.target,this.locked=a.locked):(this.cells=[[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,0]],this.row=3,this.col=3,this.target=[[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,0]],this.locked=!1)};c.prototype.getLeft=function(){return this.col<=0?null:{myTile:{drow:0,dcol:1},zeroTile:{drow:0,dcol:-1},row:this.row,col:this.col-1}},c.prototype.getRight=function(){return this.col>=3?null:{myTile:{drow:0,dcol:-1},zeroTile:{drow:0,dcol:1},row:this.row,col:this.col+1}},c.prototype.getUp=function(){return this.row<=0?null:{myTile:{drow:1,dcol:0},zeroTile:{drow:-1,dcol:0},row:this.row-1,col:this.col}},c.prototype.getDown=function(){return this.row>=3?null:{myTile:{drow:-1,dcol:0},zeroTile:{drow:1,dcol:0},row:this.row+1,col:this.col}},c.prototype.shuffle=function(a){for(var b,c=a||100;c>0;){switch(b=parseInt(4*Math.random())){case 0:this.slideLeft();break;case 1:this.slideRight();break;case 2:this.slideUp();break;case 3:this.slideDown()}c--}},c.prototype.slideLeft=function(){var a;return 0!==this.col&&(a=this.cells[this.row][this.col],this.cells[this.row][this.col]=this.cells[this.row][this.col-1],this.cells[this.row][this.col-1]=a,this.col-=1),this},c.prototype.slideRight=function(){var a;return 3!==this.col&&(a=this.cells[this.row][this.col],this.cells[this.row][this.col]=this.cells[this.row][this.col+1],this.cells[this.row][this.col+1]=a,this.col+=1),this},c.prototype.slideUp=function(){var a;return 0!==this.row&&(a=this.cells[this.row][this.col],this.cells[this.row][this.col]=this.cells[this.row-1][this.col],this.cells[this.row-1][this.col]=a,this.row-=1),this},c.prototype.slideDown=function(){var a;return 3!==this.row&&(a=this.cells[this.row][this.col],this.cells[this.row][this.col]=this.cells[this.row+1][this.col],this.cells[this.row+1][this.col]=a,this.row+=1),this},c.prototype.won=function(){var a,b;for(a in this.cells)for(b in this.cells[a])if(this.cells[a][b]!==this.target[a][b])return!1;return!0};{var d=["$scope","guideModalService","gameWonService",function(a,b,c){var d={38:"up",40:"down",37:"left",39:"right"};a.handleKeyDown=function(b){var c=b.altKey||b.ctrlKey||b.metaKey||b.shiftKey;!c&&d[b.which]&&(b.preventDefault(),a.$broadcast("keydown",{direction:d[b.which],duration:75}))},a.guide=function(){b(a),a.$broadcast("pause")},a.$on("game-won",function(){c(a),a.$broadcast("pause")})}],e=["$scope","$document","$timeout",function(a,b,d){function e(c,d){if(!a.board.locked){var e,f;"up"==c?(e=a.board.getDown(),e&&(f=a.board.cells[e.row][e.col],a.board.slideDown())):"down"==c?(e=a.board.getUp(),e&&(f=a.board.cells[e.row][e.col],a.board.slideUp())):"left"==c?(e=a.board.getRight(),e&&(f=a.board.cells[e.row][e.col],a.board.slideRight())):(e=a.board.getLeft(),e&&(f=a.board.cells[e.row][e.col],a.board.slideLeft())),b.find(".tile").trigger("move",{duration:d,movedTile:e,value:f}),a.board.won()===!0?a.$parent.$broadcast("game-won"):localStorage.setItem("board",JSON.stringify(a.board))}}a.board=new c(JSON.parse(localStorage.getItem("board"))),a.series=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],a.swipe=function(a){a.preventDefault(),e(a.gesture.direction,50)},a.$on("new-game",function(){a.board=new c,localStorage.setItem("board",JSON.stringify(a.board)),d(function(){b.find(".tile").trigger("init")},0,!0)}),a.$on("keydown",function(a,b){e(b.direction,b.duration)}),a.$on("pause",function(){a.board.locked=!0}),a.$on("resume",function(){a.board.locked=!1})}],f=["$scope","$interval","$timeout",function(a,b,c){a.timePassed=parseInt(localStorage.getItem("timePassed"))||0,a.bestTime=parseInt(localStorage.getItem("bestTime"))||"NA";var d=b(function(){a.timePassed+=1,localStorage.setItem("timePassed",a.timePassed)},1e3,0,!0);a.$on("$destroy",function(){b.cancel(d)}),a.$on("new-game",function(){a.timePassed=0,c(function(){a.bestTime=parseInt(localStorage.getItem("bestTime"))},0,!0)}),a.$on("game-won",function(){var b=localStorage.getItem("bestTime");(!b||a.timePassed<parseInt(b))&&localStorage.setItem("bestTime",a.timePassed)}),a.newGame=function(){a.$parent.$broadcast("new-game")}}],g=function(a,b){a.ok=function(){b.dismiss("done")}},h=function(a,b){a.ok=function(){b.close({})}},i=function(){function a(a){return a>9?a:a>=0?"0"+a:"--"}function b(b){var c,d,e;return c=b,e=Math.floor(c/3600),c%=3600,d=Math.floor(c/60),c%=60,a(e)+":"+a(d)+":"+a(c)}return function(a){return a=a||"",0===a.length?"--:--:--":b(parseInt(a))}},j=function(){return function(a,b){function c(a,b){var c,d;for(c in[0,1,2,3])for(d in[0,1,2,3])if(a[c][d]===b)return{y:c*f,x:d*f}}var d=116,e=4,f=d+e;b.on("init",function(){var d=parseInt(b.text())||0,e=c(a.board.cells,d),f=e.y,g=e.x;b.css({left:g+"px",top:f+"px"}),0!==d&&(b.attr({"class":"tile my-tile"}),b.text(d))}),b.on("move",function(d,e){var g,h,i,j=parseInt(b.text())||0;e.movedTile&&e.value===j&&(i=c(a.board.cells,0),g=e.movedTile.myTile.drow*f+i.y,h=e.movedTile.myTile.dcol*f+i.x,b.animate({left:h+"px",top:g+"px"},e.duration))})}},k=["$modal",function(a){return function(b){var c=a.open({templateUrl:"template/guide.html",controller:g,size:"sm"});c.result.then(function(){b.$broadcast("resume")},function(){b.$broadcast("resume")})}}],l=["$modal",function(a){return function(b){var c=a.open({templateUrl:"template/won.html",scope:b,controller:h});c.result.then(function(){b.$broadcast("new-game")},function(){b.$broadcast("new-game")})}}];angular.module("myApp",["angular-gestures","ui.bootstrap","djds4rce.angular-socialshare"]).factory("guideModalService",k).factory("gameWonService",l).controller("bodyController",d).controller("headerController",f).controller("mainController",e).filter("duration",i).directive("ngTile",j).run(function(){$(function(){$("#board-container").on("touchmove",function(a){a.preventDefault()}),$(".tile").trigger("init")})})}}({},function(){return this}());
//# sourceMappingURL=15-puzzle.min.js.map